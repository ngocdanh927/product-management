extends ../../layout/default.pug

block css 
  link(rel="stylesheet", href="/css/pages/product-detail.css")

block main
  .product-detail.py-5.bg-white
    .container
      //- Breadcrumb
      nav(aria-label="breadcrumb").mb-4
        ol.breadcrumb
          li.breadcrumb-item: a(href="/") Trang chủ
          li.breadcrumb-item: a(href="/products") Sản phẩm
          li.breadcrumb-item.active(aria-current="page") #{product.title}

      .row.g-5
        //- Left: Product Image
        .col-lg-6
          .image-sticky
            .product-image-main.rounded-4.overflow-hidden.border
              img.img-fluid.w-100(
                src=product.thumbnail
                alt=product.title
              )
            //- Nếu sau này có nhiều ảnh (Gallery), bạn có thể thêm ở đây

        //- Right: Product Info
        .col-lg-6
          .product-info-wrapper
            h1.product-detail-title.mb-3 #{product.title}
            
            //- Brand & Category
            .d-flex.align-items-center.gap-3.mb-3
              if product.brand
                span.badge.bg-light.text-dark.border Thương hiệu: #{product.brand}
              if product.category
                span.badge.bg-light.text-dark.border #{product.category}

            //- Price Section
            .price-box.p-4.rounded-4.mb-4
              if product.discountPercentage
                .d-flex.align-items-center.gap-2.mb-1
                  del.old-price-detail #{product.price}$
                  span.discount-label -#{product.discountPercentage}%
                .new-price-detail #{product.newPrice}$
              else
                .new-price-detail #{product.price}$

            //- Status & Stock
            .stock-status.mb-4
              if product.availabilityStatus === "In Stock"
                .d-flex.align-items-center.gap-2.text-success.fw-bold
                  i.bi.bi-check2-circle
                  span Còn hàng
                if product.stock
                  .text-muted.small.mt-1 (Còn lại: #{product.stock} sản phẩm)
              else
                .d-flex.align-items-center.gap-2.text-danger.fw-bold
                  i.bi.bi-x-circle
                  span Hết hàng

            //- Action Buttons
            form(
              action=``
              method="POST"
              form-add-buy
            )
              //- quantity products
              .inner-quantity.w-25
                span.text-muted.me-2 Số lượng
                input.form-control.w-50.mb-4.d-inline(type="number" min="1" name="quantity" value=1)
              .action-group.d-flex.gap-3.mb-5
                if product.availabilityStatus === "In Stock"
                  button.btn.btn-outline-main.btn-lg.flex-grow-2(btn-add-cart path=`/cart/add-cart/${product._id}`)
                    i.bi.bi-cart-plus.me-2
                    | Thêm vào giỏ
                  button.btn.btn-main.btn-lg.flex-grow-1(btn-buy path=`/buy/${product._id}`)
                    | Mua ngay
                else
                  button.btn.btn-secondary.btn-lg.w-100(disabled) Tạm hết hàng

            //- Short Specifications
            .product-specs.border-top.pt-4
              h5.fw-bold.mb-3 Thông số chi tiết
              table.table.table-sm.table-borderless
                if product.sku
                  tr
                    td.text-muted(style="width: 140px") Mã SKU:
                    td.fw-medium #{product.sku}
                tr
                  td.text-muted Giao hàng:
                  td.fw-medium Miễn phí toàn quốc
                tr
                  td.text-muted Đổi trả:
                  td.fw-medium 7 ngày miễn phí

      //- Description Section
      if product.description
        .row.mt-5
          .col-lg-8
            .description-card.p-4.rounded-4.bg-light
              h4.fw-bold.mb-4 Đặc điểm nổi bật
              .description-content !{product.description}